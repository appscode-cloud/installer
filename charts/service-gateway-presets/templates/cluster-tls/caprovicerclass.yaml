{{- if and (eq .Values.cluster.tls.issuer "ca") (ne .Values.infra.hostType "ip") }}

apiVersion: cacerts.csi.cert-manager.io/v1alpha1
kind: CAProviderClass
metadata:
  name: ace
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "service-gateway-presets.labels" . | nindent 4 }}
spec:
  refs:
  - apiGroup: ""
    kind: Secret
    namespace: cert-manager
    name: ace-ca
    key: "tls.crt"

{{- end }}
