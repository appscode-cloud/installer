{{- if .Values.global.infra.objstore.provider }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "settings.objstoreSecretName" . }}
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "ace.labels" . | nindent 4 }}
type: Opaque
stringData:
{{- if eq .Values.global.infra.objstore.provider "gcs" }}
  sa.json: '{{ .Values.global.infra.objstore.auth.GOOGLE_SERVICE_ACCOUNT_JSON_KEY }}'
{{- end }}
{{- if eq .Values.global.infra.objstore.provider "s3" }}
  AWS_ACCESS_KEY_ID: '{{ .Values.global.infra.objstore.auth.AWS_ACCESS_KEY_ID }}'
  AWS_SECRET_ACCESS_KEY: '{{ .Values.global.infra.objstore.auth.AWS_SECRET_ACCESS_KEY }}'
  {{- with .Values.global.infra.objstore.auth.AWS_REGION }}
  AWS_REGION: '{{ . }}'
  {{- end }}
{{- end }}
{{- end }}
