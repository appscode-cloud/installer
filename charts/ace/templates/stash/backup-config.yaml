apiVersion: stash.appscode.com/v1beta1
kind: BackupConfiguration
metadata:
  name: {{ include "ace.fullname" . }}-db
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "ace.labels" . | nindent 4 }}
spec:
  repository:
    name: {{ include "ace.fullname" . }}-db-repo
  retentionPolicy:
    keepDaily: 30
    name: keep-last-7d
    prune: true
  schedule: {{ .Values.global.infra.stash.backup.schedule | quote }}
  target:
    ref:
      apiVersion: appcatalog.appscode.com/v1alpha1
      kind: AppBinding
      name: {{ include "ace.fullname" . }}-db
