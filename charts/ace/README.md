# ACE

[AppsCode Container Engine](https://github.com/bytebuilders) - AppsCode Container Engine

## TL;DR;

```bash
$ helm repo add appscode https://charts.appscode.com/stable/
$ helm repo update
$ helm search repo appscode/ace --version=0.1.0
$ helm upgrade -i ace appscode/ace -n kubeops --create-namespace --version=0.1.0
```

## Introduction

This chart deploys AppsCode Container Engine on a [Kubernetes](http://kubernetes.io) cluster using the [Helm](https://helm.sh) package manager.

## Prerequisites

- Kubernetes 1.19+

## Installing the Chart

To install/upgrade the chart with the release name `ace`:

```bash
$ helm upgrade -i ace appscode/ace -n kubeops --create-namespace --version=0.1.0
```

The command deploys AppsCode Container Engine on the Kubernetes cluster in the default configuration. The [configuration](#configuration) section lists the parameters that can be configured during installation.

> **Tip**: List all releases using `helm list`

## Uninstalling the Chart

To uninstall the `ace`:

```bash
$ helm uninstall ace -n kubeops
```

The command removes all the Kubernetes components associated with the chart and deletes the release.

## Configuration

The following table lists the configurable parameters of the `ace` chart and their default values.

|                           Parameter                           |                                                                                                                  Description                                                                                                                   |                               Default                               |
|---------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------|
| billing.enabled                                               |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| platform-ui.enabled                                           |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| accounts-ui.enabled                                           |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| cluster-ui.enabled                                            |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| deploy-ui.enabled                                             |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| grafana.enabled                                               |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| kubedb-ui.enabled                                             |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| marketplace-ui.enabled                                        |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| platform-api.enabled                                          |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| prom-proxy.enabled                                            |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| nats.enabled                                                  |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| reloader.enabled                                              |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| ingress-nginx.enabled                                         |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| ingress-nginx.controller.ingressClassByName                   |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| ingress-nginx.controller.ingressClassResource.enabled         |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| ingress-nginx.controller.ingressClassResource.name            |                                                                                                                                                                                                                                                | <code>nginx-ace</code>                                              |
| ingress-nginx.controller.ingressClassResource.controllerValue |                                                                                                                                                                                                                                                | <code>"k8s.io/nginx-ace"</code>                                     |
| external-dns.enabled                                          |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| global.nameOverride                                           |                                                                                                                                                                                                                                                | <code>"ace"</code>                                                  |
| global.fullnameOverride                                       |                                                                                                                                                                                                                                                | <code>""</code>                                                     |
| global.license                                                | License for the product. <br> Example: <br> `helm install appscode/ace \` <br> `--set-file global.license=/path/to/license/file` <br> `or` <br> `helm install appscode/ace \` <br> `--set global.license=<license file content>`               | <code>""</code>                                                     |
| global.registry                                               | Docker registry used to pull app related images                                                                                                                                                                                                | <code>""</code>                                                     |
| global.registryFQDN                                           | Docker registry fqdn used to pull app related images. Set this to use docker registry hosted at ${registryFQDN}/${registry}/${image}                                                                                                           | <code>""</code>                                                     |
| global.imagePullSecrets                                       | Specify an array of imagePullSecrets. Secrets must be manually created in the namespace. <br> Example: <br> `helm template charts/ace \` <br> `--set global.imagePullSecrets[0].name=sec0 \` <br> `--set global.imagePullSecrets[1].name=sec1` | <code>[]</code>                                                     |
| global.serviceAccount.create                                  | Specifies whether a service account should be created                                                                                                                                                                                          | <code>true</code>                                                   |
| global.serviceAccount.annotations                             | Annotations to add to the service account                                                                                                                                                                                                      | <code>{}</code>                                                     |
| global.serviceAccount.name                                    | The name of the service account to use. If not set and create is true, a name is generated using the fullname template                                                                                                                         | <code>""</code>                                                     |
| global.monitoring.agent                                       | Name of monitoring agent (eg "prometheus.io/operator")                                                                                                                                                                                         | <code>""</code>                                                     |
| global.monitoring.serviceMonitor.labels                       | Specify the labels for ServiceMonitor. Prometheus crd will select ServiceMonitor using these labels. Only usable when monitoring agent is `prometheus.io/operator`.                                                                            | <code>{}</code>                                                     |
| global.monitoring.exporter.resources.requests.cpu             |                                                                                                                                                                                                                                                | <code>100m</code>                                                   |
| global.monitoring.exporter.resources.requests.memory          |                                                                                                                                                                                                                                                | <code>128Mi</code>                                                  |
| global.infra.storageClass.name                                |                                                                                                                                                                                                                                                | <code>"standard"</code>                                             |
| global.infra.tls.acmeServer                                   |                                                                                                                                                                                                                                                | <code>https://acme-staging-v02.api.letsencrypt.org/directory</code> |
| global.infra.tls.email                                        | acmeServer: https://acme-v02.api.letsencrypt.org/directory                                                                                                                                                                                     | <code>ops@appscode.com</code>                                       |
| global.infra.dns.provider                                     |                                                                                                                                                                                                                                                | <code>"Cloudflare"</code>                                           |
| global.infra.dns.auth.email                                   |                                                                                                                                                                                                                                                | <code>ops@appscode.com</code>                                       |
| global.infra.dns.auth.token                                   |                                                                                                                                                                                                                                                | <code>xyz</code>                                                    |
| global.infra.objstore.host                                    |                                                                                                                                                                                                                                                | <code></code>                                                       |
| global.infra.objstore.bucket                                  |                                                                                                                                                                                                                                                | <code></code>                                                       |
| global.infra.objstore.provider                                |                                                                                                                                                                                                                                                | <code>Google</code>                                                 |
| global.infra.objstore.mountPath                               | credential : /data/credentials/sa.json                                                                                                                                                                                                         | <code>/data/credentials</code>                                      |
| global.infra.objstore.auth.serviceAccountJson                 |                                                                                                                                                                                                                                                | <code>"xyz"</code>                                                  |
| global.infra.kms.provider                                     | location where the secret key resides                                                                                                                                                                                                          | <code>""</code>                                                     |
| global.infra.kms.mountPath                                    |                                                                                                                                                                                                                                                | <code>""</code>                                                     |
| global.infra.kms.masterKeyURL                                 |                                                                                                                                                                                                                                                | <code>""</code>                                                     |
| global.infra.badger.mountPath                                 |                                                                                                                                                                                                                                                | <code>/badger</code>                                                |
| global.infra.badger.levels                                    |                                                                                                                                                                                                                                                | <code>7</code>                                                      |
| global.infra.invoice.mountPath                                |                                                                                                                                                                                                                                                | <code>/billing</code>                                               |
| global.infra.invoice.bucket                                   | host: https://console.cloud.google.com/storage/browser/invoice-storage-demo                                                                                                                                                                    | <code>gs://invoice-storage-demo</code>                              |
| global.infra.invoice.trackerEmail                             |                                                                                                                                                                                                                                                | <code>invoice-tracker@appscode.com</code>                           |
| settings.db.version                                           |                                                                                                                                                                                                                                                | <code>"13.2"</code>                                                 |
| settings.db.databaseName                                      |                                                                                                                                                                                                                                                | <code>bb</code>                                                     |
| settings.db.terminationPolicy                                 |                                                                                                                                                                                                                                                | <code>Delete</code>                                                 |
| settings.db.persistence.size                                  |                                                                                                                                                                                                                                                | <code>100Gi</code>                                                  |
| settings.db.resources.limits.cpu                              |                                                                                                                                                                                                                                                | <code>1000m</code>                                                  |
| settings.db.resources.limits.memory                           |                                                                                                                                                                                                                                                | <code>2Gi</code>                                                    |
| settings.db.auth.username                                     |                                                                                                                                                                                                                                                | <code>postgres</code>                                               |
| settings.db.auth.password                                     |                                                                                                                                                                                                                                                | <code>"xyz"</code>                                                  |
| settings.cache.version                                        |                                                                                                                                                                                                                                                | <code>"6.0.6"</code>                                                |
| settings.cache.terminationPolicy                              |                                                                                                                                                                                                                                                | <code>Delete</code>                                                 |
| settings.cache.persistence.size                               |                                                                                                                                                                                                                                                | <code>10Gi</code>                                                   |
| settings.cache.resources.limits.cpu                           |                                                                                                                                                                                                                                                | <code>1000m</code>                                                  |
| settings.cache.resources.limits.memory                        |                                                                                                                                                                                                                                                | <code>2Gi</code>                                                    |
| settings.cache.auth.username                                  |                                                                                                                                                                                                                                                | <code>root</code>                                                   |
| settings.cache.auth.password                                  |                                                                                                                                                                                                                                                | <code>"xyz"</code>                                                  |
| settings.smtp.host                                            | enableMailerService: true mailerServiceType: smtp                                                                                                                                                                                              | <code>smtp.mailgun.org:465</code>                                   |
| settings.smtp.tlsEnabled                                      |                                                                                                                                                                                                                                                | <code>false</code>                                                  |
| settings.smtp.from                                            |                                                                                                                                                                                                                                                | <code>no-reply@example.com</code>                                   |
| settings.smtp.username                                        |                                                                                                                                                                                                                                                | <code>apikey</code>                                                 |
| settings.smtp.password                                        |                                                                                                                                                                                                                                                | <code>xyz</code>                                                    |
| settings.smtp.subjectPrefix                                   |                                                                                                                                                                                                                                                | <code>ACE</code>                                                    |
| settings.smtp.sendAsPlainText                                 |                                                                                                                                                                                                                                                | <code>false</code>                                                  |
| settings.nats.shardCount                                      |                                                                                                                                                                                                                                                | <code>128</code>                                                    |
| settings.nats.mountPath                                       |                                                                                                                                                                                                                                                | <code>/nats/creds</code>                                            |
| settings.nats.operatorCreds                                   |                                                                                                                                                                                                                                                | <code>'xyz'</code>                                                  |
| settings.nats.operatorJwt                                     |                                                                                                                                                                                                                                                | <code>'xyz'</code>                                                  |
| settings.nats.systemCreds                                     |                                                                                                                                                                                                                                                | <code>'xyz'</code>                                                  |
| settings.nats.systemJwt                                       |                                                                                                                                                                                                                                                | <code>'xyz'</code>                                                  |
| settings.nats.systemPubKey                                    |                                                                                                                                                                                                                                                | <code>'xyz'</code>                                                  |
| settings.nats.systemUserCreds                                 |                                                                                                                                                                                                                                                | <code>'xyz'</code>                                                  |
| settings.nats.adminCreds                                      |                                                                                                                                                                                                                                                | <code>'xyz'</code>                                                  |
| settings.nats.adminUserCreds                                  |                                                                                                                                                                                                                                                | <code>'xyz'</code>                                                  |
| settings.platform.domain                                      |                                                                                                                                                                                                                                                | <code>appscode.ninja</code>                                         |
| settings.platform.appName                                     | ####### settings___oiginal:                                                                                                                                                                                                                    | <code>'ACE: Kubernetes Native Data Platform'</code>                 |
| settings.platform.runMode                                     | # Either "dev", "prod" or "test".                                                                                                                                                                                                              | <code>'prod'</code>                                                 |
| settings.platform.experimentalFeatures                        |                                                                                                                                                                                                                                                | <code>false</code>                                                  |
| settings.platform.forcePrivate                                | # Force every new repository to be private. #                                                                                                                                                                                                  | <code>false</code>                                                  |
| settings.platform.disableHttpGit                              | # Indicates whether or not to disable Git clone through HTTP/HTTPS. When # disabled, users can only perform Git operations via SSH. #                                                                                                          | <code>false</code>                                                  |
| settings.platform.installLock                                 | # Lock the path /install to configure gitea #                                                                                                                                                                                                  | <code>true</code>                                                   |
| settings.platform.repositoryUploadEnabled                     | # Indicates whether or not to enable repository file upload feature. #                                                                                                                                                                         | <code>true</code>                                                   |
| settings.platform.repositoryUploadAllowedTypes                | # File types that are allowed to be uploaded, e.g. image/jpeg|image/png. # Leave empty means allow any file typ #                                                                                                                              | <code></code>                                                       |
| settings.platform.repositoryUploadMaxFileSize                 | # Maximum size of each file in MB. #                                                                                                                                                                                                           | <code>3</code>                                                      |
| settings.platform.repositoryUploadMaxFiles                    | # Maximum number of files per upload. #                                                                                                                                                                                                        | <code>5</code>                                                      |
| settings.platform.serviceEnableCaptcha                        | # Enable this to use captcha validation for registration. #                                                                                                                                                                                    | <code>true</code>                                                   |
| settings.platform.serviceRegisterEmailConfirm                 | # Users need to confirm e-mail for registration #                                                                                                                                                                                              | <code>true</code>                                                   |
| settings.platform.serviceDisableRegistration                  | # Weather or not to allow users to register. #                                                                                                                                                                                                 | <code>false</code>                                                  |
| settings.platform.serviceRequireSignInView                    | # Weather or not sign in is required to view anything. #                                                                                                                                                                                       | <code>false</code>                                                  |
| settings.platform.serviceEnableNotifyMail                     | # Mail notification #                                                                                                                                                                                                                          | <code>true</code>                                                   |
| settings.platform.sessionProvider                             |                                                                                                                                                                                                                                                | <code>redis</code>                                                  |
| settings.platform.sessionProviderConfig                       |                                                                                                                                                                                                                                                | <code></code>                                                       |
| settings.platform.cookieName                                  | sessionProviderConfig: network=tcp,addr=gitea-cache.byte:6379,db=0,pool_size=100,idle_timeout=180,prefix=session                                                                                                                               | <code>i_like_bytebuilders</code>                                    |
| settings.platform.cacheAdapter                                | # Either "memory", "redis", or "memcache", default is "memory" #                                                                                                                                                                               | <code>redis</code>                                                  |
| settings.platform.cacheInterval                               | # For "memory" only, GC interval in seconds, default is 60 #                                                                                                                                                                                   | <code>60</code>                                                     |
| settings.platform.cacheHost                                   | # For "redis" and "memcache", connection host address # redis: network=tcp,addr=:6379,password=xyz,db=0,pool_size=100,idle_timeout=180 # memcache: `127.0.0.1:11211` #                                                                         | <code></code>                                                       |
| settings.platform.cachePassword                               |                                                                                                                                                                                                                                                | <code></code>                                                       |
| settings.platform.serverLandingPage                           | # Landing page for non-logged users, can be "home" or "explore" #                                                                                                                                                                              | <code>home</code>                                                   |
| settings.platform.databaseType                                | # Either "mysql", "postgres" or "sqlite3", you can connect to TiDB with # MySQL protocol.  Default is to use the postgresql configuration included # with this chart. #                                                                        | <code>postgres</code>                                               |
| settings.platform.databaseHost                                | # Database host.  Unused unless `postgresql.install` is false. #                                                                                                                                                                               | <code></code>                                                       |
| settings.platform.databaseUser                                | # Database user.  Unused unless `postgresql.install` is false. #                                                                                                                                                                               | <code>postgres</code>                                               |
| settings.platform.databasePassword                            | # Database password.  Unused unless `postgresql.install` is false. #                                                                                                                                                                           | <code></code>                                                       |
| settings.platform.databaseName                                | # Database password.  Unused unless `postgresql.install` is false. #                                                                                                                                                                           | <code>bb</code>                                                     |
| settings.platform.webhookQueueLength                          | # Hook task queue length, increase if webhook shooting starts hanging #                                                                                                                                                                        | <code>1000</code>                                                   |
| settings.platform.webhookDeliverTimeout                       | # Deliver timeout in seconds #                                                                                                                                                                                                                 | <code>5</code>                                                      |
| settings.platform.webhookSkipTlsVerify                        | # Allow insecure certification #                                                                                                                                                                                                               | <code>true</code>                                                   |
| settings.platform.webhookPagingNum                            | # Number of history information in each page #                                                                                                                                                                                                 | <code>10</code>                                                     |
| settings.platform.logMode                                     | # Can be "console" and "file", default is "console" # Use comma to separate multiple modes, e.g. "console, file" #                                                                                                                             | <code>console</code>                                                |
| settings.platform.logLevel                                    | # Either "Trace", "Info", "Warn", "Error", "Fatal", default is "Trace" #                                                                                                                                                                       | <code>Info</code>                                                   |
| settings.platform.otherShowFooterBranding                     | # Undocumented, but you can take a guess. #                                                                                                                                                                                                    | <code>false</code>                                                  |
| settings.platform.otherShowFooterVersion                      | # Show version information about Gogs and Go in the footer #                                                                                                                                                                                   | <code>true</code>                                                   |
| settings.platform.otherShowFooterTemplateLoadTime             | # Show time of template execution in the footer #                                                                                                                                                                                              | <code>true</code>                                                   |
| settings.platform.securitySecretKey                           | # Change this value for your installation. #                                                                                                                                                                                                   | <code>"changeme"</code>                                             |
| settings.platform.uiExplorePagingNum                          | # Number of repositories that are showed in one explore page #                                                                                                                                                                                 | <code>20</code>                                                     |
| settings.platform.uiIssuePagingNum                            | # Number of issues that are showed in one page #                                                                                                                                                                                               | <code>10</code>                                                     |
| settings.platform.uiFeedMaxCommitNum                          | # Number of maximum commits showed in one activity feed. # NOTE: This value is also used in how many commits a webhook will send. #                                                                                                            | <code>5</code>                                                      |
| settings.platform.cronEnabled                                 | # Enable running cron tasks periodically. #                                                                                                                                                                                                    | <code>true</code>                                                   |
| settings.platform.cronRunAtStart                              | # Run cron tasks when Gogs starts. #                                                                                                                                                                                                           | <code>false</code>                                                  |
| settings.platform.cronUpdateMirrorsSchedule                   | # Cron syntax for scheduling update mirrors, e.g. @every 1h. #                                                                                                                                                                                 | <code>'@every 10m'</code>                                           |
| settings.platform.cronRepoHealthCheckSchedule                 | # Cron syntax for scheduling repository health check, e.g. @every 24h. #                                                                                                                                                                       | <code>'@every 24h'</code>                                           |
| settings.platform.cronRepoHealthCheckTimeout                  | # Time duration syntax for health check execution timeout, e.g. 60s. #                                                                                                                                                                         | <code>60s</code>                                                    |
| settings.platform.cronRepoHealthCheckArgs                     | # Arguments for command git fsck, e.g. --unreachable --tags. #                                                                                                                                                                                 | <code></code>                                                       |
| settings.platform.cronCheckRepoStatsRunAtStart                | # Enable this to run repository statistics check at start time. #                                                                                                                                                                              | <code>true</code>                                                   |
| settings.platform.cronCheckRepoStatsSchedule                  | # Cron syntax for scheduling repository statistics check, e.g. @every 24h. #                                                                                                                                                                   | <code>'@every 24h'</code>                                           |
| settings.platform.cronRepoArchiveCleanupRunAtStart            | # Enable this to run repository archives cleanup at start time. #                                                                                                                                                                              | <code>false</code>                                                  |
| settings.platform.cronRepoArchiveCleanupSchedule              | # Cron syntax for scheduling repository statistics check, e.g. @every 24h. #                                                                                                                                                                   | <code>'@every 24h'</code>                                           |
| settings.platform.cronRepoArchiveCleanupOlderThan             | # Time duration to check if archive should be cleaned, e.g. 24h #                                                                                                                                                                              | <code>24h</code>                                                    |
| settings.platform.enableCSRFCookieHttpOnly                    | csrf cookie http only enable                                                                                                                                                                                                                   | <code>false</code>                                                  |
| settings.stripe.stripeKey                                     | stripe access token                                                                                                                                                                                                                            | <code>sk_</code>                                                    |
| settings.stripe.endpointSecret                                | webhook signing secret                                                                                                                                                                                                                         | <code>wh</code>                                                     |
| settings.searchlight.enabled                                  |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| settings.searchlight.alertmanagerAddr                         |                                                                                                                                                                                                                                                | <code>http://alertmanager.m3db.svc:8443</code>                      |
| settings.searchlight.queryAddr                                |                                                                                                                                                                                                                                                | <code>http://m3query.m3db.svc:7201</code>                           |
| settings.searchlight.rulerAddr                                |                                                                                                                                                                                                                                                | <code>http://ruler.m3db.svc:8443</code>                             |
| settings.searchlight.m3coordinatorAddr                        |                                                                                                                                                                                                                                                | <code>http://m3coordinator.m3db.svc:7201</code>                     |
| settings.grafana.appMode                                      | possible values : production, development                                                                                                                                                                                                      | <code>production</code>                                             |
| settings.grafana.sessionProvider                              |                                                                                                                                                                                                                                                | <code>redis</code>                                                  |
| settings.grafana.sessionProviderConfig                        |                                                                                                                                                                                                                                                | <code></code>                                                       |
| settings.grafana.cacheAdapter                                 |                                                                                                                                                                                                                                                | <code>redis</code>                                                  |
| settings.grafana.cacheInterval                                |                                                                                                                                                                                                                                                | <code>60</code>                                                     |
| settings.grafana.cacheHost                                    |                                                                                                                                                                                                                                                | <code></code>                                                       |
| settings.grafana.skipMigrations                               |                                                                                                                                                                                                                                                | <code>true</code>                                                   |
| image.registry                                                | Docker registry used to pull app container image                                                                                                                                                                                               | <code>appscode</code>                                               |
| image.repository                                              | App container image                                                                                                                                                                                                                            | <code>gitea</code>                                                  |
| image.tag                                                     | Overrides the image tag whose default is the chart appVersion.                                                                                                                                                                                 | <code>""</code>                                                     |
| image.pullPolicy                                              |                                                                                                                                                                                                                                                | <code>Always</code>                                                 |
| podAnnotations                                                |                                                                                                                                                                                                                                                | <code>{}</code>                                                     |
| podSecurityContext                                            |                                                                                                                                                                                                                                                | <code>{}</code>                                                     |
| securityContext                                               |                                                                                                                                                                                                                                                | <code>{}</code>                                                     |
| resources                                                     |                                                                                                                                                                                                                                                | <code>{}</code>                                                     |
| nodeSelector                                                  |                                                                                                                                                                                                                                                | <code>{}</code>                                                     |
| tolerations                                                   |                                                                                                                                                                                                                                                | <code>[]</code>                                                     |
| affinity                                                      |                                                                                                                                                                                                                                                | <code>{}</code>                                                     |


Specify each parameter using the `--set key=value[,key=value]` argument to `helm upgrade -i`. For example:

```bash
$ helm upgrade -i ace appscode/ace -n kubeops --create-namespace --version=0.1.0 --set ingress-nginx.controller.ingressClassResource.name=nginx-ace
```

Alternatively, a YAML file that specifies the values for the parameters can be provided while
installing the chart. For example:

```bash
$ helm upgrade -i ace appscode/ace -n kubeops --create-namespace --version=0.1.0 --values values.yaml
```
