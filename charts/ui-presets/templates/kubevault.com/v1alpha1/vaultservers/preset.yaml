{{ $m := .Values.monitoring }}
{{- if .Values.global }}
{{- $m = .Values.global.monitoring }}
{{- end }}

apiVersion: charts.x-helm.dev/v1alpha1
kind: ClusterChartPreset
metadata:
  name: kubevault.com-v1alpha1-vaultservers
spec:
  selector: {}
  values:
    monitoring:
      serviceMonitor:
      {{- with $m.serviceMonitor.labels }}
        labels:
          {{- toYaml . | nindent 10 }}
      {{- else }}
        labels: {}
      {{- end }}
    form:
      alert:
      {{- with $m.alert.labels }}
        labels:
          {{- toYaml . | nindent 10 }}
      {{- else }}
        labels: {}
      {{- end }}